from showdown.engine.select_best_move import get_payoff_matrix
from showdown.engine.objects import State
from showdown.engine.state_mutator import StateMutator


from config import logger
import logging

logger.setLevel(logging.CRITICAL)

state = State.from_dict({'self': {'active': {'id': 'greninja', 'level': 100, 'hp': 285, 'maxhp': 285, 'ability': 'battlebond', 'item': 'choicespecs', 'baseStats': {'hp': 72, 'attack': 95, 'defense': 67, 'special-attack': 103, 'special-defense': 71, 'speed': 122}, 'attack': 203, 'defense': 171, 'special-attack': 305, 'special-defense': 178, 'speed': 377, 'attack_boost': -1, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'surf', 'disabled': False, 'current_pp': 24}, {'id': 'darkpulse', 'disabled': False, 'current_pp': 24}, {'id': 'icebeam', 'disabled': False, 'current_pp': 16}, {'id': 'watershuriken', 'disabled': False, 'current_pp': 32}], 'types': ['water', 'dark'], 'canMegaEvo': False}, 'reserve': {'mawile': {'id': 'mawile', 'level': 100, 'hp': 261, 'maxhp': 261, 'ability': 'intimidate', 'item': 'mawilite', 'baseStats': {'hp': 50, 'attack': 85, 'defense': 85, 'special-attack': 55, 'special-defense': 55, 'speed': 50}, 'attack': 295, 'defense': 206, 'special-attack': 131, 'special-defense': 146, 'speed': 180, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'suckerpunch', 'disabled': False, 'current_pp': 8}, {'id': 'playrough', 'disabled': False, 'current_pp': 16}, {'id': 'thunderpunch', 'disabled': False, 'current_pp': 24}, {'id': 'firefang', 'disabled': False, 'current_pp': 24}], 'types': ['steel', 'fairy'], 'canMegaEvo': False}, 'tornadustherian': {'id': 'tornadustherian', 'level': 100, 'hp': 299, 'maxhp': 299, 'ability': 'regenerator', 'item': 'fightiniumz', 'baseStats': {'hp': 79, 'attack': 100, 'defense': 80, 'special-attack': 110, 'special-defense': 90, 'speed': 121}, 'attack': 212, 'defense': 197, 'special-attack': 319, 'special-defense': 216, 'speed': 375, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'taunt', 'disabled': False, 'current_pp': 32}, {'id': 'hurricane', 'disabled': False, 'current_pp': 16}, {'id': 'focusblast', 'disabled': False, 'current_pp': 8}, {'id': 'defog', 'disabled': False, 'current_pp': 24}], 'types': ['flying'], 'canMegaEvo': False}, 'ferrothorn': {'id': 'ferrothorn', 'level': 100, 'hp': 352, 'maxhp': 352, 'ability': 'ironbarbs', 'item': 'leftovers', 'baseStats': {'hp': 74, 'attack': 94, 'defense': 131, 'special-attack': 54, 'special-defense': 116, 'speed': 20}, 'attack': 224, 'defense': 299, 'special-attack': 144, 'special-defense': 364, 'speed': 68, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'spikes', 'disabled': False, 'current_pp': 32}, {'id': 'leechseed', 'disabled': False, 'current_pp': 16}, {'id': 'knockoff', 'disabled': False, 'current_pp': 32}, {'id': 'gyroball', 'disabled': False, 'current_pp': 8}], 'types': ['grass', 'steel'], 'canMegaEvo': False}, 'heatran': {'id': 'heatran', 'level': 100, 'hp': 385, 'maxhp': 385, 'ability': 'flashfire', 'item': 'leftovers', 'baseStats': {'hp': 91, 'attack': 90, 'defense': 106, 'special-attack': 130, 'special-defense': 106, 'speed': 77}, 'attack': 194, 'defense': 248, 'special-attack': 296, 'special-defense': 332, 'speed': 201, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'taunt', 'disabled': False, 'current_pp': 32}, {'id': 'magmastorm', 'disabled': False, 'current_pp': 8}, {'id': 'earthpower', 'disabled': False, 'current_pp': 16}, {'id': 'toxic', 'disabled': False, 'current_pp': 16}], 'types': ['fire', 'steel'], 'canMegaEvo': False}, 'garchomp': {'id': 'garchomp', 'level': 100, 'hp': 379, 'maxhp': 379, 'ability': 'roughskin', 'item': 'rockyhelmet', 'baseStats': {'hp': 108, 'attack': 130, 'defense': 95, 'special-attack': 80, 'special-defense': 85, 'speed': 102}, 'attack': 296, 'defense': 317, 'special-attack': 176, 'special-defense': 206, 'speed': 282, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'stealthrock', 'disabled': False, 'current_pp': 32}, {'id': 'earthquake', 'disabled': False, 'current_pp': 16}, {'id': 'toxic', 'disabled': False, 'current_pp': 16}, {'id': 'roar', 'disabled': False, 'current_pp': 32}], 'types': ['dragon', 'ground'], 'canMegaEvo': False}}, 'side_conditions': {'toxic_count': 0}, 'trapped': False}, 'opponent': {'active': {'id': 'landorustherian', 'level': 100, 'hp': 319.0, 'maxhp': 319, 'ability': 'intimidate', 'item': 'choicescarf', 'baseStats': {'hp': 89, 'attack': 145, 'defense': 90, 'special-attack': 105, 'special-defense': 80, 'speed': 91}, 'attack': 389, 'defense': 216, 'special-attack': 223.63636363636363, 'special-defense': 197, 'speed': 309.1, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'earthquake', 'disabled': False, 'current_pp': 16}, {'id': 'stoneedge', 'disabled': False, 'current_pp': 16},  {'id': 'uturn', 'disabled': False, 'current_pp': 32}, {'id': 'stealthrock', 'disabled': False, 'current_pp': 32}, {'id': 'defog', 'disabled': False, 'current_pp': 24}], 'types': ['ground', 'flying'], 'canMegaEvo': False}, 'reserve': {'magearna': {'id': 'magearna', 'level': 100, 'hp': 363.0, 'maxhp': 363, 'ability': 'soulheart', 'item': 'assaultvest', 'baseStats': {'hp': 80, 'attack': 95, 'defense': 115, 'special-attack': 130, 'special-defense': 115, 'speed': 65}, 'attack': 226, 'defense': 266, 'special-attack': 325.6, 'special-defense': 322, 'speed': 159.09090909090907, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'fleurcannon', 'disabled': False, 'current_pp': 8}, {'id': 'voltswitch', 'disabled': False, 'current_pp': 32}, {'id': 'thunderbolt', 'disabled': False, 'current_pp': 24}, {'id': 'icebeam', 'disabled': False, 'current_pp': 16}], 'types': ['steel', 'fairy'], 'canMegaEvo': False}, 'gliscor': {'id': 'gliscor', 'level': 100, 'hp': 352.0, 'maxhp': 352, 'ability': 'poisonheal', 'item': 'toxicorb', 'baseStats': {'hp': 75, 'attack': 95, 'defense': 125, 'special-attack': 45, 'special-defense': 75, 'speed': 95}, 'attack': 226, 'defense': 299, 'special-attack': 114.54545454545453, 'special-defense': 211, 'speed': 279.40000000000003, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'earthquake', 'disabled': False, 'current_pp': 16}, {'id': 'roost', 'disabled': False, 'current_pp': 16}, {'id': 'toxic', 'disabled': False, 'current_pp': 16}, {'id': 'stealthrock', 'disabled': False, 'current_pp': 32}], 'types': ['ground', 'flying'], 'canMegaEvo': False}, 'clefable': {'id': 'clefable', 'level': 100, 'hp': 394.0, 'maxhp': 394, 'ability': 'magicguard', 'item': 'leftovers', 'baseStats': {'hp': 95, 'attack': 70, 'defense': 73, 'special-attack': 95, 'special-defense': 90, 'speed': 60}, 'attack': 160.0, 'defense': 269.5, 'special-attack': 226, 'special-defense': 217, 'speed': 156, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'moonblast', 'disabled': False, 'current_pp': 24}, {'id': 'softboiled', 'disabled': False, 'current_pp': 16}, {'id': 'wish', 'disabled': False, 'current_pp': 16}, {'id': 'calmmind', 'disabled': False, 'current_pp': 32}], 'types': ['fairy'], 'canMegaEvo': False}, 'tapubulu': {'id': 'tapubulu', 'level': 100, 'hp': 343.0, 'maxhp': 343, 'ability': 'grassysurge', 'item': 'leftovers', 'baseStats': {'hp': 70, 'attack': 130, 'defense': 115, 'special-attack': 85, 'special-defense': 95, 'speed': 75}, 'attack': 296, 'defense': 268, 'special-attack': 206.0, 'special-defense': 289, 'speed': 186, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'hornleech', 'disabled': False, 'current_pp': 16}, {'id': 'superpower', 'disabled': False, 'current_pp': 8}, {'id': 'woodhammer', 'disabled': False, 'current_pp': 24}, {'id': 'stoneedge', 'disabled': False, 'current_pp': 8}], 'types': ['grass', 'fairy'], 'canMegaEvo': False}, 'gyarados': {'id': 'gyarados', 'level': 100, 'hp': 331.0, 'maxhp': 331, 'ability': 'moxie', 'item': 'flyiniumz', 'baseStats': {'hp': 95, 'attack': 125, 'defense': 79, 'special-attack': 60, 'special-defense': 100, 'speed': 81}, 'attack': 349, 'defense': 194, 'special-attack': 141.8181818181818, 'special-defense': 237, 'speed': 287.1, 'attack_boost': 0, 'defense_boost': 0, 'special_attack_boost': 0, 'special_defense_boost': 0, 'speed_boost': 0, 'status': None, 'volatileStatus': [], 'moves': [{'id': 'waterfall', 'disabled': False, 'current_pp': 24}, {'id': 'dragondance', 'disabled': False, 'current_pp': 32}, {'id': 'earthquake', 'disabled': False, 'current_pp': 16}, {'id': 'bounce', 'disabled': False, 'current_pp': 8}], 'types': ['water', 'flying'], 'canMegaEvo': False}}, 'side_conditions': {'toxic_count': 0}, 'trapped': False}, 'weather': None, 'field': None, 'trickroom': False, 'forceSwitch': False, 'wait': False})
mutator = StateMutator(state)
state_instructions = get_payoff_matrix(mutator, depth=3)
